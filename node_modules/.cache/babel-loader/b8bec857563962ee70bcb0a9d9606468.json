{"ast":null,"code":"import _defineProperty from\"/home/bibhu/CelpipSoftware/celpipSW/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/bibhu/CelpipSoftware/celpipSW/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/bibhu/CelpipSoftware/celpipSW/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState}from'react';import classes from'./CreateExamForm.module.css';import{AiFillCloseCircle}from\"react-icons/ai\";import{OptionField,TextInput,TextAreaInput}from'../../../../../../../CommonApps/FormInputObjects';import{addaparagraphsection,addaparagraphsectionimage}from'../../../../../../../CommonApps/AllAPICalls';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var AddParagraphSection=function AddParagraphSection(props){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),selectedFile=_useState2[0],setSelectedFile=_useState2[1];var initialFormData=Object.freeze({title:\"\",paragraphText:\"\",duration:\"\",readingTestId:props.oneExamData!==null&&props.oneExamData.readingTest!==null?props.oneExamData.readingTest.id:null,contentType:\"text\",paragraphFile:null});var _useState3=useState(initialFormData),_useState4=_slicedToArray(_useState3,2),formData=_useState4[0],updateFormData=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),showTextArea=_useState6[0],setShowTextArea=_useState6[1];var handleSubmit=function handleSubmit(e){e.preventDefault();if(formData.title===\"\"){alert('please enter a title ');return null;}if(formData.contentType===\"text\"&&formData.paragraphText===\"\"){alert('please put the text content');return null;}if(formData.contentType===\"image\"&&selectedFile===null){alert('please select  iage file');return null;}if(formData.duration===\"\"&&!isNumeric(formData.duration)){alert('please enter duration');return null;}if(formData.readingTestId===null){alert('There are no reading Tests in this exam');return null;}if(formData.contentType===\"image\"){var imageformData=new FormData();imageformData.append('title',formData.title);imageformData.append('duration',formData.duration);imageformData.append('readingTestId',formData.readingTestId);imageformData.append('contentType',formData.contentType);imageformData.append('paragraphFile',selectedFile.image[0]);addaparagraphsectionimage({formData:formData,imageformData:imageformData,props:props});}if(formData.contentType===\"text\"){addaparagraphsection({formData:formData,props:props});}};var isNumeric=function isNumeric(str){if(typeof str!=\"string\")return false;// we only process strings!  \nreturn!isNaN(str)&&// use type coercion to parse the _entirety_ of the string (`parseFloat` alone does not do this)...\n!isNaN(parseFloat(str));// ...and ensure strings of whitespace fail\n};var handleChange=function handleChange(e){if(e.target.name===\"duration\"&&!isNumeric(e.target.value)){alert(\"Please enter only digit\");return null;}updateFormData(_objectSpread(_objectSpread({},formData),{},_defineProperty({},e.target.name,e.target.value)));};var _useState7=useState({color:\"white\",backgroundColor:\"var(--themeColor)\"}),_useState8=_slicedToArray(_useState7,2),buttonColorText=_useState8[0],setButtonColorText=_useState8[1];var _useState9=useState({color:\"grey\",backgroundColor:\"lightgrey\"}),_useState10=_slicedToArray(_useState9,2),buttonColorImage=_useState10[0],setButtonColorImage=_useState10[1];var textAreaHandler=function textAreaHandler(){setShowTextArea(true);setButtonColorText({color:\"white\",backgroundColor:\"var(--themeColor)\"});setButtonColorImage({color:\"grey\",backgroundColor:\"lightgrey\"});updateFormData(_objectSpread(_objectSpread({},formData),{},_defineProperty({},'contentType',\"text\")));};var imageAreaHandler=function imageAreaHandler(){setShowTextArea(false);setButtonColorImage({color:\"white\",backgroundColor:\"var(--themeColor)\"});setButtonColorText({color:\"grey\",backgroundColor:\"lightgrey\"});updateFormData(_objectSpread(_objectSpread({},formData),{},_defineProperty({},'contentType',\"image\")));};var handleChangeImage=function handleChangeImage(e){if(e.target&&e.target.files[0]){if(e.target.name==='paragraphFile'){setSelectedFile({image:e.target.files});}}};console.log(\"selectedFile: \",selectedFile);return/*#__PURE__*/_jsx(\"div\",{className:classes.createExamFormParent,children:/*#__PURE__*/_jsxs(\"form\",{className:classes.createExamForm,onSubmit:handleSubmit,style:{width:\"1000px\"},children:[/*#__PURE__*/_jsx(\"div\",{className:classes.closeButtonDiv,children:/*#__PURE__*/_jsx(\"button\",{onClick:props.onPress,className:classes.closeFormButton,children:/*#__PURE__*/_jsx(AiFillCloseCircle,{className:classes.closeButtonIcon})})}),/*#__PURE__*/_jsxs(\"div\",{className:classes.inputBoxesDiv,children:[/*#__PURE__*/_jsx(TextInput,{handleChange:handleChange,label:\"Paragraph title\",name:\"title\",placeholder:\"e.g. Practice Test A - Reading Part 3: Reading for Information\",requirement:\"*\"}),/*#__PURE__*/_jsx(TextInput,{handleChange:handleChange,label:\"Duration in minutes\",name:\"duration\",placeholder:\"12\",requirement:\"*\"}),/*#__PURE__*/_jsx(\"div\",{className:classes.toggleButtons,children:\"Either you can write text or upload image for paragraph content.\"}),/*#__PURE__*/_jsxs(\"div\",{className:classes.toggleButtons,children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:classes.paraTextButton,onClick:textAreaHandler,style:buttonColorText,children:\"Text\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:classes.paraImageButton,onClick:imageAreaHandler,style:buttonColorImage,children:\"Image\"})]}),showTextArea&&/*#__PURE__*/_jsx(TextAreaInput,{handleChange:handleChange,label:\"Paragraph Text Area\",name:\"paragraphText\",placeholder:\"Dear Maria, The purpose of writing today is to ... \",requirement:\"*\"}),!showTextArea&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:handleChangeImage,name:\"paragraphFile\",accept:\"image/*\",className:classes.image_field}),selectedFile&&/*#__PURE__*/_jsx(\"img\",{alt:\"not fount\",width:\"250px\",src:URL.createObjectURL(selectedFile.image[0]),className:classes.paraImageView})]}),/*#__PURE__*/_jsx(\"div\",{className:classes.submitButtonDiv,children:/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",className:classes.submit_button,children:[/*#__PURE__*/_jsx(\"b\",{children:\" Add\"}),\" \"]})})]})]})});};export default AddParagraphSection;","map":null,"metadata":{},"sourceType":"module"}