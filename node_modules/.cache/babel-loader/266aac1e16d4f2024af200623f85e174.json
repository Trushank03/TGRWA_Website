{"ast":null,"code":"import _toConsumableArray from\"/home/bibhu/CelpipSoftware/celpipSW/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/home/bibhu/CelpipSoftware/celpipSW/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState,useEffect}from'react';import classes from'./ParagraphSections.module.css';//import {getlisteningtaskquestions } from '../CommonApps/AllAPICalls';\nimport{addlisteningtaskresponse}from'../CommonApps/AllAPICalls';import OneQuestion from'./OneQuestion';import{BsCaretDownFill}from'react-icons/bs';import AllQuestionsListeningSection from'./AllQuestionsListeningSection';import ReactPlayer from'react-player';import Countdown from'react-countdown';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var OneListeningTask=function OneListeningTask(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),selectedQuestions=_useState2[0],setSelectedQuestions=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),listenSubSectionNo=_useState4[0],setListenSubSectionNo=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),reloadQuestions=_useState6[0],setReloadQuestions=_useState6[1];//const [questionsData, getQuestionsData] = useState(null);\nuseEffect(function(){//let listeningTaskId = props.OneTask.id;\t   \n//getlisteningtaskquestions({listeningTaskId, getQuestionsData});\nsetListenSubSectionNo(function(listenSubSectionNo){return 0;});},[props.OneTask,reloadQuestions,setListenSubSectionNo]);//console.log(\"questionsData: \", questionsData);\nvar reloadHandler=function reloadHandler(){setReloadQuestions(function(reloadQuestions){return!reloadQuestions;});};var nextSecHandler=function nextSecHandler(){if(listenSubSectionNo===2){var listeningTaskId=props.OneTask.id;var responseId=props.responseId;addlisteningtaskresponse({listeningTaskId:listeningTaskId,responseId:responseId,selectedQuestions:selectedQuestions,props:props});//props.nextSecHandler();\n}if(listenSubSectionNo<2){setListenSubSectionNo(function(listenSubSectionNo){return listenSubSectionNo+1;});}};var renderer=function renderer(_ref){var hours=_ref.hours,minutes=_ref.minutes,seconds=_ref.seconds,completed=_ref.completed;if(completed){// Render a completed state\nreturn/*#__PURE__*/_jsx(\"div\",{children:\" Over \"});}else{// Render a countdown\nif(minutes===0){return/*#__PURE__*/_jsxs(\"span\",{style:{color:\"red\",paddingLeft:\"10px\",paddingRight:\"10px\"},children:[/*#__PURE__*/_jsxs(\"b\",{children:[\" \",minutes,\":\",seconds]}),\" mins\"]});}else{return/*#__PURE__*/_jsxs(\"span\",{children:[\" \",minutes,\":\",seconds,\" minutes\"]});}}};var reTime=Number(props.OneTask.preparation_time)*60*1000;var timePrep=Date.now()+reTime;//let timeRemain = Date.now() + Number(props.OneTask.preparation_time)*10000;\nconsole.log(\"props.OneTask.audioFile: \",props.OneTask.audioFile);var pushSelectedAnswer=function pushSelectedAnswer(one_Question){for(var i=0;i<selectedQuestions.length;i++){if(Number(selectedQuestions[i].questionId)===Number(one_Question.questionId)){selectedQuestions.splice(i,1);};}setSelectedQuestions(function(selectedQuestions){return[].concat(_toConsumableArray(selectedQuestions),[one_Question]);});};console.log(\"selected Listening Questions: \",selectedQuestions);return/*#__PURE__*/_jsxs(\"div\",{className:classes.oneParaSection,children:[listenSubSectionNo===0&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.paraTitle,children:[/*#__PURE__*/_jsxs(\"span\",{children:[\" \",/*#__PURE__*/_jsxs(\"b\",{children:[props.OneTask.title,\" \"]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"span\",{children:[\" Time remaining :\",/*#__PURE__*/_jsx(Countdown,{date:timePrep,renderer:renderer,onComplete:nextSecHandler},props.OneTask.id)]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:classes.nextSectionButton,onClick:nextSecHandler,children:\" NEXT \"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.oneListeningInstructionSection,children:[/*#__PURE__*/_jsxs(\"div\",{style:{color:\"var(--themeColor)\"},children:[\" \",/*#__PURE__*/_jsx(\"b\",{children:\"Instructions\"}),\" \"]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.textInstructionListeningSection,children:[\" \",props.OneTask.instructionText,\"  \"]}),props.OneTask.instructionImage!==null&&/*#__PURE__*/_jsx(\"img\",{className:classes.listeningInsturctionSecImage,src:props.OneTask.instructionImage,alt:\"edr Logo\"})]})]}),listenSubSectionNo===1&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.paraTitle,children:[/*#__PURE__*/_jsxs(\"span\",{children:[\" \",/*#__PURE__*/_jsxs(\"b\",{children:[props.OneTask.title,\" \"]})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:classes.nextSectionButton,onClick:nextSecHandler,children:\" NEXT \"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.listeningSecMainAudioVideo,children:[/*#__PURE__*/_jsx(ReactPlayer,{url:props.OneTask.audioFile,width:\"100%\",height:\"100%\",controls:true,className:classes.videoAudioBoxLS,playing:true,onEnded:nextSecHandler}),/*#__PURE__*/_jsx(\"div\",{className:classes.blockBox,children:\" \"})]})]}),listenSubSectionNo===2&&/*#__PURE__*/_jsx(AllQuestionsListeningSection,{OneTask:props.OneTask,nextSecHandler:nextSecHandler,listenSubSectionNo:listenSubSectionNo,pushSelectedAnswer:pushSelectedAnswer})]});};export default OneListeningTask;","map":null,"metadata":{},"sourceType":"module"}