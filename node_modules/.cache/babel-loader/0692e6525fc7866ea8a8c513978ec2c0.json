{"ast":null,"code":"import _defineProperty from\"/home/bibhu/CelpipSoftware/celpipSW/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/bibhu/CelpipSoftware/celpipSW/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/bibhu/CelpipSoftware/celpipSW/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState}from'react';import classes from'./GroupQuestionsForm.module.css';import{AiFillCloseCircle}from\"react-icons/ai\";import{OptionField,TextInput,TextAreaInput,TextAreaInputMedium}from'../../../../../../../CommonApps/FormInputObjects';import{addlisteningtaskwimage,addspeakingtaskwoimage}from'../../../../../../../CommonApps/AllAPICalls';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AddListeningTaskForm=function AddListeningTaskForm(props){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),selectedFile=_useState2[0],setSelectedFile=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),selectedAudioFile=_useState4[0],setSelectedAudioFile=_useState4[1];var initialFormData=Object.freeze({title:\"\",preparation_time:\"\",instructionText:\"\",listeningTestId:props.oneExamData!==null&&props.oneExamData.listeningTest!==null?props.oneExamData.listeningTest.id:null,duration:\"1\"});var _useState5=useState(initialFormData),_useState6=_slicedToArray(_useState5,2),formData=_useState6[0],updateFormData=_useState6[1];var handleChange=function handleChange(e){updateFormData(_objectSpread(_objectSpread({},formData),{},_defineProperty({},e.target.name,e.target.value)));};var handleChangeImage=function handleChangeImage(e){if(e.target&&e.target.files[0]){if(e.target.name==='instructionImage'){setSelectedFile({image:e.target.files});}}};var handleChangeAudioFile=function handleChangeAudioFile(e){if(e.target&&e.target.files[0]){if(e.target.name==='audioFile'){setSelectedAudioFile({image:e.target.files});}}};var handleSubmit=function handleSubmit(e){e.preventDefault();var newFormData=new FormData();newFormData.append('title',formData.title);newFormData.append('preparation_time',formData.preparation_time);newFormData.append('instructionText',formData.instructionText);newFormData.append('listeningTestId',formData.listeningTestId);newFormData.append('duration',formData.duration);{selectedFile!==null&&newFormData.append('instructionImage',selectedFile.image[0]);newFormData.append('audioFile',selectedAudioFile.image[0]);addlisteningtaskwimage({newFormData:newFormData,props:props});}{/* selectedFile === null &&\t      \n        addspeakingtaskwoimage({formData, props});\t    \n      */}};var removeImageHandler=function removeImageHandler(e){setSelectedFile(function(selectedFile){return null;});};var removeAudioFileHandler=function removeAudioFileHandler(e){setSelectedAudioFile(function(selectedAudioFile){return null;});};console.log(\"formData: \",formData);console.log(\"selectedFile\",selectedFile);console.log(\"selectedAudioFile\",selectedAudioFile);return/*#__PURE__*/_jsx(\"div\",{className:classes.groupQuestionsParent,children:/*#__PURE__*/_jsxs(\"form\",{className:classes.groupQuestionsForm,onSubmit:handleSubmit,style:{width:\"80vw\",maxWidth:\"1200px\"},children:[/*#__PURE__*/_jsx(\"div\",{className:classes.closeButtonDiv,children:/*#__PURE__*/_jsx(\"button\",{onClick:props.onPress,className:classes.closeFormButton,children:/*#__PURE__*/_jsx(AiFillCloseCircle,{className:classes.closeButtonIcon})})}),/*#__PURE__*/_jsx(TextInput,{handleChange:handleChange,label:\"Listening Task Title\",name:\"title\",placeholder:\"e.g. Practice Test A - Writing Task 1\",requirement:\"*\"}),/*#__PURE__*/_jsx(TextInput,{handleChange:handleChange,label:\"Preparation time in minutes\",name:\"preparation_time\",placeholder:\".30\",requirement:\"*\"}),/*#__PURE__*/_jsx(TextInput,{handleChange:handleChange,label:\"Total Duration\",name:\"duration\",placeholder:\"10\",requirement:\"*\"}),/*#__PURE__*/_jsx(\"div\",{style:{width:\"50px\"},children:\"  \"}),/*#__PURE__*/_jsx(TextAreaInputMedium,{handleChange:handleChange,label:\"Instructions\",name:\"instructionText\",placeholder:\"e.g. You will hear a conversation between a woman and a man. The man is a bus driver and the woman is a passenger trying to get somewhere.\",requirement:\"*\"}),selectedAudioFile===null&&/*#__PURE__*/_jsx(\"div\",{className:classes.ImageSubmissionStatus,children:\" Audio/Video file will not be added \"}),selectedAudioFile!==null&&/*#__PURE__*/_jsx(\"div\",{className:classes.ImageSubmissionStatus,children:\" Audio/Video file will  be added \"}),/*#__PURE__*/_jsxs(\"div\",{className:classes.audioFileDiv,children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:handleChangeAudioFile,name:\"audioFile\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:removeAudioFileHandler,children:\" Remove Audio/Video file \"})]}),selectedFile===null&&/*#__PURE__*/_jsx(\"div\",{className:classes.ImageSubmissionStatus,children:\" Image will not be added \"}),selectedFile!==null&&/*#__PURE__*/_jsx(\"div\",{className:classes.ImageSubmissionStatus,children:\" Image will  be added \"}),/*#__PURE__*/_jsxs(\"div\",{className:classes.audioFileDiv,children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:handleChangeImage,name:\"instructionImage\",accept:\"image/*\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:removeImageHandler,children:\" Remove Image \"})]}),selectedFile&&/*#__PURE__*/_jsx(\"img\",{alt:\"not fount\",width:\"250px\",src:URL.createObjectURL(selectedFile.image[0]),className:classes.paraImageView}),/*#__PURE__*/_jsx(\"div\",{className:classes.submitButtonDiv,children:/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",className:classes.submit_button,children:[/*#__PURE__*/_jsx(\"b\",{children:\" Add\"}),\" \"]})})]})});};export default AddListeningTaskForm;","map":null,"metadata":{},"sourceType":"module"}