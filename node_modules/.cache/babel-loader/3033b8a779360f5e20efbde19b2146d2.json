{"ast":null,"code":"import _toConsumableArray from\"/home/bibhu/CelpipSoftware/celpipSW/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/home/bibhu/CelpipSoftware/celpipSW/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState,useEffect}from'react';import classes from'./ParagraphSections.module.css';import Countdown from'react-countdown';import{getallparagraphquestions,addreadingtaskresponse}from'../CommonApps/AllAPICalls';import OneQuestion from'./OneQuestion';import OneQuestionGrouped from'./OneQuestionGrouped';import{BsCaretDownFill}from'react-icons/bs';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var OneParagraphSection=function OneParagraphSection(props){var paraId=props.oneParagraph.id;var resId=props.responseId;console.log(\"paraId: \",paraId);var initialFormData=Object.freeze({readingTaskId:props.oneParagraph!==null?props.oneParagraph.id:\"\",responseId:props.responseId!==null?props.responseId:\"\"});var _useState=useState(initialFormData),_useState2=_slicedToArray(_useState,2),formData=_useState2[0],updateFormData=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),selectedQuestions=_useState4[0],setSelectedQuestions=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),showQuestionAddForm=_useState6[0],setShowQuestionAddForm=_useState6[1];//onClick={addQuestionHandler(paragraphId)\nvar addQuestionHandler=function addQuestionHandler(paragraphId){setShowQuestionAddForm(true);};var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),reloadQuestions=_useState8[0],setReloadQuestions=_useState8[1];var closeFormHandler=function closeFormHandler(){setShowQuestionAddForm(false);setReloadQuestions(function(reloadQuestions){return!reloadQuestions;});};var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),questionsData=_useState10[0],getQuestionsData=_useState10[1];useEffect(function(){var paragraphId=props.oneParagraph.id;getallparagraphquestions({paragraphId:paragraphId,getQuestionsData:getQuestionsData});return function(){setSelectedQuestions(function(selectedQuestions){return[];});};},[props.oneParagraph,reloadQuestions]);var reloadHandler=function reloadHandler(){setReloadQuestions(function(reloadQuestions){return!reloadQuestions;});};var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),showGroupQuestionsForm=_useState12[0],setShowGroupQuestionsForm=_useState12[1];var groupQuestionsHandler=function groupQuestionsHandler(){setShowGroupQuestionsForm(true);};var closeGroupQuestionFormHandler=function closeGroupQuestionFormHandler(){setShowGroupQuestionsForm(false);};var nextPageHandler=function nextPageHandler(){//props.nextSecHandler();\t  \nconsole.log(\"posting selected answers\");console.log(\"Task Id: \",formData.readingTaskId);var responseId=formData.responseId;addreadingtaskresponse({paraId:paraId,resId:resId,selectedQuestions:selectedQuestions,props:props});};var renderer=function renderer(_ref){var hours=_ref.hours,minutes=_ref.minutes,seconds=_ref.seconds,completed=_ref.completed;if(completed){// Render a completed state\nreturn/*#__PURE__*/_jsx(\"div\",{children:\" Over \"});}else{// Render a countdown\nif(minutes===0){return/*#__PURE__*/_jsxs(\"span\",{style:{color:\"red\",paddingLeft:\"10px\",paddingRight:\"10px\"},children:[\" \",/*#__PURE__*/_jsxs(\"b\",{children:[minutes,\":\",seconds]}),\" mins\"]});}else{return/*#__PURE__*/_jsxs(\"span\",{children:[\" \",minutes,\":\",seconds,\" mins\"]});}}};var reTime=Number(props.oneParagraph.duration)*60*1000;var ttt=Date.now()+reTime;var pushSelectedAnswer=function pushSelectedAnswer(one_Question){for(var i=0;i<selectedQuestions.length;i++){if(Number(selectedQuestions[i].questionId)===Number(one_Question.questionId)){selectedQuestions.splice(i,1);};}setSelectedQuestions(function(selectedQuestions){return[].concat(_toConsumableArray(selectedQuestions),[one_Question]);});};var _useState13=useState({value1:props.oneParagraph.flipQnsec,value2:props.oneParagraph.flipQnsec===\"yes\"?\"no\":\"yes\"}),_useState14=_slicedToArray(_useState13,2),isSwapped=_useState14[0],setIsSwapped=_useState14[1];console.log(\"selectedQuestions: \",selectedQuestions);return/*#__PURE__*/_jsxs(\"div\",{className:classes.oneParaSection,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.paraTitle,children:[/*#__PURE__*/_jsxs(\"span\",{children:[\" \",/*#__PURE__*/_jsxs(\"b\",{children:[props.oneParagraph.title,\" \"]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"  Time remaining:\",/*#__PURE__*/_jsx(Countdown,{date:ttt,renderer:renderer,onComplete:nextPageHandler},props.oneParagraph.id)]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:classes.nextSectionButton,onClick:nextPageHandler,children:\" NEXT \"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.content,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.paragraphTextSec,children:[props.oneParagraph.contentType===\"image\"&&/*#__PURE__*/_jsx(\"img\",{className:classes.userImage,src:props.oneParagraph.paragraphFile,alt:\"edr Logo\"}),props.oneParagraph.contentType===\"text\"&&/*#__PURE__*/_jsxs(\"div\",{className:classes.paragraphTextSec_margin,children:[\"  \",props.oneParagraph.paragraphText,\" \"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.paragraphQuestionSec,children:[/*#__PURE__*/_jsx(\"div\",{className:classes.genQuestionInfo,children:\" Using the drop-down menu, choose the best option according to the information given in the message.\"}),/*#__PURE__*/_jsx(\"div\",{className:classes.allQuestionsOneSec,children:questionsData!==null&&questionsData.map(function(question,index){if(question.grouped===isSwapped.value1){return undefined;}if(question.grouped===isSwapped.value2){if(isSwapped.value2===\"no\"){return/*#__PURE__*/_jsx(OneQuestion,{question:question,reload:reloadHandler,paragraphId:props.oneParagraph.id,oneExamData:props.oneExamData,pushSelectedAnswer:pushSelectedAnswer},index);}else{return/*#__PURE__*/_jsx(OneQuestionGrouped,{question:question,reload:reloadHandler,paragraphId:props.oneParagraph.id,oneExamData:props.oneExamData,pushSelectedAnswer:pushSelectedAnswer},index);}}})}),/*#__PURE__*/_jsx(\"div\",{className:classes.allQuestionsOneSec,children:questionsData!==null&&questionsData.map(function(question,index){if(question.grouped===isSwapped.value2){return undefined;}if(question.grouped===isSwapped.value1){if(isSwapped.value2===\"yes\"){return/*#__PURE__*/_jsx(OneQuestion,{question:question,reload:reloadHandler,paragraphId:props.oneParagraph.id,oneExamData:props.oneExamData,pushSelectedAnswer:pushSelectedAnswer},index);}else{return/*#__PURE__*/_jsx(OneQuestionGrouped,{question:question,reload:reloadHandler,paragraphId:props.oneParagraph.id,oneExamData:props.oneExamData,pushSelectedAnswer:pushSelectedAnswer},index);}}})})]})]})]});};export default OneParagraphSection;","map":null,"metadata":{},"sourceType":"module"}